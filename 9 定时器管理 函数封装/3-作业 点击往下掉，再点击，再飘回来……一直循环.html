<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>点击往下掉，再点击，再飘回来……一直循环</title>
<script type="text/javascript" src="doMove.js"></script>
<style type="text/css">
</style>
</head>
<body>
<script type="text/javascript">
		var str = '';
		var len = 20;
		var timer = null;
		var flag = true;
		var finished = true;
		var num = 0;
		var aDiv = document.getElementsByTagName('div');
		for (var i = 0; i < len; i++) {
			str += '<div style="width:50px;height:50px;background:red;position:absolute;top:0px;left:'+i*60+'px;"></div>';
		}

		document.body.innerHTML = str;

		document.onclick = function(){
			if (!finished) {return;}
			finished = false;
			clearInterval(timer);
			var num = 0;
			timer = setInterval(function(){
				doMove(aDiv[num],'top',23,flag?500:0,num == len-1?function(){
					finished = true;
					flag = !flag;
				}:null);
				num++;
				if (num===len) {
					clearInterval(timer);
				}
			},100);
		}

</script>
</body>
</html>
